"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var MegaBleScanner=function(){function n(e){_classCallCheck(this,n),this.isScanning=!1,this.onDeviceFound=e}return _createClass(n,[{key:"initBleAdapter",value:function(){var i=this;return new Promise(function(n,t){wx.openBluetoothAdapter({success:function(e){i._registCallback(),n(e)},fail:function(e){return t(e)}})})}},{key:"_registCallback",value:function(){var n=this;wx.onBluetoothDeviceFound(function(e){e.devices=e.devices.filter(function(e){return!(!e.name||-1==e.name.toLowerCase().indexOf("ring")&&-1==e.name.toLowerCase().indexOf("sle"))}),0<e.devices.length&&n.onDeviceFound(e)})}},{key:"scan",value:function(){var e=this;return console.log("scan start..."),new Promise(function(n,t){e.isScanning?t("isScanning"):(e.isScanning=!0,wx.startBluetoothDevicesDiscovery({allowDuplicatesKey:!0,success:function(e){return n(e)},fail:function(e){return t(e)}}))})}},{key:"stopScan",value:function(){this.isScanning&&(wx.stopBluetoothDevicesDiscovery(),console.log("scan stop!")),this.isScanning=!1}}]),n}();exports.default=MegaBleScanner;