"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeHeartBeatCmd=exports.makeSyncDailyDataCmd=exports.makeSyncMonitorDataCmd=exports.makeV2EnableModeSpoMonitor=exports.makeV2EnableModeDaily=exports.makeV2EnableModeLiveSpo=exports.makeLiveCmd=exports.makeMonitorCmd=exports.makeUserInfoCmd=exports.makeSetTimeCmd=exports.makeBindMasterCmd=exports.makeBindTokenCmd=exports.makeBindMacCmd=void 0;var _MegaUtils=require("./MegaUtils.js"),_MegaBleConst=require("./MegaBleConst.js"),STATUS_CLIENT=0,makeBindMacCmd=exports.makeBindMacCmd=function(e,t){var a=_initPack(_MegaBleConst.CMD.FAKEBIND),n=(0,_MegaUtils.userIdToBytes)(e);return a.set(n,3),a.set((0,_MegaUtils.encryptMac)(t),15),a},makeBindTokenCmd=exports.makeBindTokenCmd=function(e,t){var a=_initPack(_MegaBleConst.CMD.FAKEBIND),n=(0,_MegaUtils.userIdToBytes)(e);return a.set(n,3),a.set((0,_MegaUtils.encryptToken)(t),15),a},makeBindMasterCmd=exports.makeBindMasterCmd=function(){var e=_initPack(_MegaBleConst.CMD.FAKEBIND),t=(0,_MegaUtils.getRandomString)(12),a=(0,_MegaUtils.getMD5Bytes)(t).slice(-5);return e.set(t.split("").map(function(e){return e.charCodeAt()}),3),e.set(a,15),e},makeSetTimeCmd=exports.makeSetTimeCmd=function(){var e=Math.floor(Date.now()/1e3),t=_initPack(_MegaBleConst.CMD.SETTIME);return t[3]=(4278190080&e)>>24,t[4]=(16711680&e)>>16,t[5]=(65280&e)>>8,t[6]=255&e,t},makeUserInfoCmd=exports.makeUserInfoCmd=function(e,t,a,n,o){var r=_initPack(_MegaBleConst.CMD.SETUSERINFO);return r[3]=e,r[4]=t,r[5]=a,r[6]=n,r[7]=o,r},makeMonitorCmd=exports.makeMonitorCmd=function(e){var t=_initPack(_MegaBleConst.CMD.MONITOR);return t[1]=e?_MegaBleConst.CMD.CTRL_MONITOR_ON:_MegaBleConst.CMD.CTRL_MONITOR_OFF,t[3]=e?_MegaBleConst.CMD.CTRL_MONITOR_ON:_MegaBleConst.CMD.CTRL_MONITOR_OFF,t},makeLiveCmd=exports.makeLiveCmd=function(e){var t=_initPack(_MegaBleConst.CMD.LIVECTRL);return t[1]=e?_MegaBleConst.CMD.CTRL_LIVE_START:_MegaBleConst.CMD.CTRL_LIVE_STOP,t[3]=e?_MegaBleConst.CMD.CTRL_LIVE_START:_MegaBleConst.CMD.CTRL_LIVE_STOP,t},makeV2EnableModeLiveSpo=exports.makeV2EnableModeLiveSpo=function(e,t){var a=_initPack(_MegaBleConst.CMD.V2_MODE_LIVE_SPO);return a[3]=e?"S".charCodeAt():0,a[4]=(4278190080&t)>>24,a[5]=(16711680&t)>>16,a[6]=(65280&t)>>8,a[7]=255&t,a},makeV2EnableModeDaily=exports.makeV2EnableModeDaily=function(e,t){var a=_initPack(_MegaBleConst.CMD.V2_MODE_DAILY);return a[3]=e?"S".charCodeAt():0,a[4]=(4278190080&t)>>24,a[5]=(16711680&t)>>16,a[6]=(65280&t)>>8,a[7]=255&t,a},makeV2EnableModeSpoMonitor=exports.makeV2EnableModeSpoMonitor=function(e,t){var a=_initPack(_MegaBleConst.CMD.V2_MODE_SPO_MONITOR);return a[1]=_MegaBleConst.CMD.V2_MODE_SPO_MONITOR,a[3]=e?"S".charCodeAt():0,a[4]=(4278190080&t)>>24,a[5]=(16711680&t)>>16,a[6]=(65280&t)>>8,a[7]=255&t,a},makeSyncMonitorDataCmd=exports.makeSyncMonitorDataCmd=function(){var e=_initPack(_MegaBleConst.CMD.SYNCDATA);return e[3]=_MegaBleConst.CMD.CTRL_MONITOR_DATA,e},makeSyncDailyDataCmd=exports.makeSyncDailyDataCmd=function(){var e=_initPack(_MegaBleConst.CMD.SYNCDATA);return e[3]=_MegaBleConst.CMD.CTRL_DAILY_DATA,e},makeHeartBeatCmd=exports.makeHeartBeatCmd=function(){var e=_initPack(_MegaBleConst.CMD.HEARTBEAT);return e[3]=1,e},_initPack=function(e){var t=new Uint8Array(20);return t[0]=e,t[1]=0,t[2]=STATUS_CLIENT,t},_initPackWithCtrl=function(e,t){var a=new Uint8Array(20);return a[0]=e,a[1]=0,a[2]=STATUS_CLIENT,a[3]=t,a};